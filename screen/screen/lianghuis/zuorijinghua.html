<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>昨日精华</title>
    <link rel="stylesheet" href="js/bootstrap-3.3.5/css/bootstrap.css">
    <style>
        html,body{
            width: 100%;
            height: 100%;
        }
        *{
            padding: 0;
            margin: 0;
        }
        table{
            width: 100%;
        }
        table tr th{
            width: 16%;
            text-align: center;
            background: #01407b;
            color: #fff;
            border-width: 0;
        }
        table tr td{
            width: 16%;
            text-align: center;
            /*background: #01407b;*/
            color: #000;
            overflow: hidden;
            text-overflow:ellipsis;
            white-space: nowrap;
            border-width: 0;
        }
        h1{
            color: rgb(1, 64, 123);
            font-size: 18px;
        }

    </style>
</head>
<body>
<h1>昨日精华</h1>
<table class="myTable table-striped">
    <tr>
        <th>序号</th>
        <th>标题</th>
        <th>报道量</th>
        <th>引爆媒体</th>
        <th>当日核心首发媒体</th>
        <th>首发时间</th>
    </tr>
</table>
<script src="js/jquery.min.js"></script>
<script src="js/bootstrap-3.3.5/js/bootstrap.js"></script>
<script>
    $(function () {
        $.ajax({
            type: "GET",
            url: "/xhs/wcm/bigdata.do?field=zyzxfield_021&loadtime="+getNowFormatDate(false)+"&modelid=hotpointnews&pagesize=20&serviceid=hotpointevent1&startpage=0&typeid=widget",
            data: {},
            dataType: "json",
            success: function(data){
                data= data.PAGEITEMS
                for (var i = 0; i < data.length; i++) {

                    var obj = data[i];
                    console.log(obj);
                    $(".myTable").append("<tr><td>"+(i+1)+"</td><td>"+obj.TITLE+"</td><td style='color:red;'>"+obj.REPORTNUM+"</td><td>"+obj.EVENTTIPPING3.split(";")[0].split(":")[0] +"</td><td>"+obj.FIRSTMEDIA+"</td><td>"+obj.FIRSTTIME+"</td></tr>")
                }
            }
        });

        /**
         *获取当前时间  形如2016-11-24+14
         **/
        function getNowFormatDate(isWM) {
            var date = new Date();
            var seperator1 = "-";
            var year = date.getFullYear();
            var month = date.getMonth() + 1;
            var strDate = date.getDate();
            var hours=date.getHours();
            if (month >= 1 && month <= 9) {
                month = "0" + month;
            }
            if (strDate >= 0 && strDate <= 9) {
                strDate = "0" + strDate;
            }
            if(isWM){
                return year + seperator1 + month + seperator1 + strDate;
            }else{
                if (hours >= 0 && hours <= 9) {
                    hours = "0" + hours;
                }
                var currentdate = year + seperator1 + month + seperator1 + strDate
                    + "+" + hours;

                return currentdate;
            }

        }
    })
</script>
</body>
</html>